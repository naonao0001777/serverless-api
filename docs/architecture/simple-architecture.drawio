<mxfile host="app.diagrams.net" agent="GitHub Copilot" version="24.7.17">
  <diagram name="Simple AWS Architecture" id="simple-serverless-auth">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="700" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Serverless 認証 API - シンプル構成図" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
          <mxGeometry x="300" y="40" width="400" height="40" as="geometry" />
        </mxCell>
        
        <!-- User -->
        <mxCell id="user" value="👤&#xa;ユーザ" style="ellipse;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="250" width="80" height="80" as="geometry" />
        </mxCell>
        
        <!-- Frontend -->
        <mxCell id="frontend" value="🌐&#xa;Next.js&#xa;(Vercel)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=14;fontStyle=1;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="250" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- AWS Cloud Container -->
        <mxCell id="aws-container" value="AWS Cloud" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="380" y="150" width="520" height="280" as="geometry" />
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="api-gateway" value="🚪&#xa;API Gateway&#xa;POST /auth" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=12;fontStyle=1;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="200" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- Lambda -->
        <mxCell id="lambda" value="⚡&#xa;Lambda&#xa;認証処理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFA000;fontSize=12;fontStyle=1;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="580" y="200" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- DynamoDB -->
        <mxCell id="dynamodb" value="🗄️&#xa;DynamoDB&#xa;AuthData" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=12;fontStyle=1;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="200" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- CloudWatch (small) -->
        <mxCell id="cloudwatch" value="📊 CloudWatch Logs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="580" y="350" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- IAM Role (small) -->
        <mxCell id="iam" value="🔐 IAM Role" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="350" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- Main Flow Arrows -->
        <mxCell id="flow1" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#1976D2;rounded=0;strokeWidth=3;fontSize=12;fontStyle=1;" edge="1" parent="1" source="user" target="frontend">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="flow2" value="POST /auth" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#4CAF50;rounded=0;strokeWidth=3;fontSize=12;fontStyle=1;" edge="1" parent="1" source="frontend" target="api-gateway">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="flow3" value="実行" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#FF9800;rounded=0;strokeWidth=3;fontSize=12;fontStyle=1;" edge="1" parent="1" source="api-gateway" target="lambda">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="flow4" value="認証確認" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=block;endFill=1;startFill=1;strokeColor=#7B1FA2;rounded=0;strokeWidth=3;fontSize=12;fontStyle=1;" edge="1" parent="1" source="lambda" target="dynamodb">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <!-- Support Arrows (thinner) -->
        <mxCell id="support1" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#D32F2F;rounded=0;strokeWidth=1;dashed=1;" edge="1" parent="1" source="iam" target="lambda">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="support2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#689F38;rounded=0;strokeWidth=1;dashed=1;" edge="1" parent="1" source="lambda" target="cloudwatch">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Steps -->
        <mxCell id="steps-container" value="処理の流れ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;verticalAlign=top;fontSize=14;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="50" y="480" width="800" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="step1" value="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#1976D2;fontColor=white;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="520" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step1-text" value="ユーザがパスワード入力" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="520" width="140" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="step2" value="2" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4CAF50;fontColor=white;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="520" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step2-text" value="Next.js が API Gateway に送信" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="320" y="520" width="180" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="step3" value="3" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FF9800;fontColor=white;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="520" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step3-text" value="Lambda で認証処理実行" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="560" y="520" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="step4" value="4" style="ellipse;whiteSpace=wrap;html=1;fillColor=#7B1FA2;fontColor=white;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="560" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step4-text" value="DynamoDB でパスワード確認" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="560" width="170" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="step5" value="5" style="ellipse;whiteSpace=wrap;html=1;fillColor=#795548;fontColor=white;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="560" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step5-text" value="認証結果をユーザに返却" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="360" y="560" width="150" height="30" as="geometry" />
        </mxCell>
        
        <!-- Key Info Box -->
        <mxCell id="info-container" value="重要な設定" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;verticalAlign=top;fontSize=14;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="570" y="480" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="info1" value="💾 テーブル名: AuthData" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="510" width="140" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="info2" value="🔑 デフォルト認証: admin123" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="530" width="170" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="info3" value="📍 API エンドポイント: POST /auth" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="550" width="190" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="info4" value="🚀 実行環境: Node.js 20.x" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="570" width="160" height="30" as="geometry" />
        </mxCell>
        
        <!-- Success/Error Flow -->
        <mxCell id="result-success" value="✅ 成功&#xa;リダイレクト" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="400" width="70" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="result-error" value="❌ 失敗&#xa;エラー表示" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#F44336;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="360" width="70" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="result-arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#4CAF50;rounded=0;strokeWidth=2;" edge="1" parent="1" source="frontend" target="result-success">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="result-arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=block;startArrow=none;endFill=1;strokeColor=#F44336;rounded=0;strokeWidth=2;" edge="1" parent="1" source="frontend" target="result-error">
          <mxGeometry width="100" relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
